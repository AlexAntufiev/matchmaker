# Matchmaker

Матчмекейр представляет собой систему, которая формирует игроков, стараясь удовлетворить следующим
критериям:
* Разница в задержке (latency) игроков должна быть минимальной
* Разница в уровне навыка (skill) игроков должна быть минимальной
* Время ожидания игрока в очереди должно быть минимальным

Игроки встают в пул матчмейкера путем отправки HTTP POST запроса /users с параметрами:
* name: String
* skill: Double
* latency: Double
В матчмекере предусмотрены ограничения на параметр `skill` в диапазоне от `0.0` до `10.0`.
При валидном запросе по параметру skill определяется диапазон смежных ему и помещаются в карту значений. 
В этой карте ключом является диапазон значений, а значением — очередь из игроков, которые ждут своей игры.
Очередь является приоритетной, то есть чем ниже latency или время в очереди, относительно других игроков в очереди, 
тем ближе игрок к началу очереди.

Для формирования группы игроков при старте приложения стартует задача, которая каждую секунду проверяет очереди для каждого
диапазона skill очередь игроков и если в очереди находится `groupSize` игроков(количество игроков для формирования одной группы (матча), задается в конфиге),
то берется и удаляется нужное количество игроков с начала очереди и отдаются форматеру.
Форматер при формировании очередной группы составляет следующую информацию:
* последовательный номер группы
* min/max/avg skill in group
* min/max/avg latency in group
* min/max/avg time spent in queue
* список имен игроков
Дальше составленная информация выводится в std out.
  
Для облегчения задачи из-за нехватки времени на разработку, в системе есть определенные упрощения:
1. Убрано взаимодействие с БД, например, чтобы хранить поступивших пользователей, sequence id сформированных групп. 
   Отсюда предполагается, что наша система не может упасть и потерять данные в оперативной памяти. 
2. Можно было придумать более действенный алгоритм при формировании группы игроков, так как в текущем решение мы не сможем
    гарантировать, что для определенного ренджа скиллов найдется необходимая группа игроков или
    может получится так, что игрок с большим показателем latency будет ждать слишком долго и другие проблемы балансировки.
3. Можно было бы добавить обработку в несколько потоков пула игроков или сделать не блокируемое чтение данных или другие оптимизации.
4. Тестирование и обработку ошибок тоже решил опустить. Тестирование проводил руками.